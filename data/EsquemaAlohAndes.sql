
-- CREACION DE LA TABLA OPERADOR
CREATE TABLE OPERADOR
   (ID NUMBER, 
	NOMBRE VARCHAR2(40), 
	EMAIL VARCHAR2(40),
    TELEFONO VARCHAR2(15)
    );
	
ALTER TABLE OPERADOR
	ADD CONSTRAINT PK_OPERADOR 
	PRIMARY KEY (ID)
ENABLE;

ALTER TABLE OPERADOR
	ADD CONSTRAINT UN_OPERADOR_EMAIL 
	UNIQUE (EMAIL)
ENABLE;

ALTER TABLE OPERADOR
	MODIFY NOMBRE NOT NULL
ENABLE;

ALTER TABLE OPERADOR
	MODIFY EMAIL NOT NULL
ENABLE;

ALTER TABLE OPERADOR
	MODIFY TELEFONO NOT NULL
ENABLE;


-- CREACION DE LA TABLA USUARIO
CREATE TABLE USUARIO
    (ID NUMBER, 
     NOMBRE VARCHAR2(40),
     EMAIL VARCHAR2(40),
     TELEFONO VARCHAR2(15) ,
     TIPO VARCHAR2(40)
    );
    
ALTER TABLE USUARIO
	ADD CONSTRAINT PK_USUARIO 
	PRIMARY KEY (ID)
ENABLE;

ALTER TABLE USUARIO
	MODIFY NOMBRE NOT NULL
ENABLE;

ALTER TABLE USUARIO
	MODIFY EMAIL NOT NULL
ENABLE;

ALTER TABLE USUARIO
	MODIFY TELEFONO NOT NULL
ENABLE;

ALTER TABLE USUARIO
	MODIFY TIPO NOT NULL
ENABLE;

ALTER TABLE USUARIO
    ADD CONSTRAINT CK_USUARIO_TIPO
	CHECK (TIPO='Profesor' OR TIPO='Profesor Invitado' OR TIPO='Estudiante'  OR TIPO='Egresado'  OR TIPO='Empleado'  OR TIPO='Padre Estudiante' OR TIPO='Invitado')
ENABLE;


-- CREACION DE TABLA PERSONA JURIDICA
CREATE TABLE PERSONA_JURIDICA(
    ID NUMBER,
    ID_SUPERINTENDENCIA_TURISMO NUMBER,
    ID_CAMARA_COMERCIO NUMBER,
    CATEGORIA NUMBER(1),
    PRECIO_NOCHE NUMBER,
    TIPO VARCHAR2(9)
);
ALTER TABLE PERSONA_JURIDICA
	ADD CONSTRAINT PK_PERSONA_JURIDICA
	PRIMARY KEY (ID)
ENABLE;

ALTER TABLE PERSONA_JURIDICA
ADD CONSTRAINT FK_PJ_ID
    FOREIGN KEY (ID)
    REFERENCES OPERADOR(ID)
ENABLE;

ALTER TABLE PERSONA_JURIDICA
	MODIFY ID_SUPERINTENDENCIA_TURISMO NOT NULL
ENABLE;

ALTER TABLE PERSONA_JURIDICA
	MODIFY ID_CAMARA_COMERCIO NOT NULL
ENABLE;


ALTER TABLE PERSONA_JURIDICA
	MODIFY TIPO NOT NULL
ENABLE;

ALTER TABLE PERSONA_JURIDICA
	ADD CONSTRAINT UN_PJ_IDSUPER 
	UNIQUE (ID_SUPERINTENDENCIA_TURISMO)
ENABLE;

ALTER TABLE PERSONA_JURIDICA
	ADD CONSTRAINT UN_PJ_IDCOMERCIO
	UNIQUE (ID_CAMARA_COMERCIO)
ENABLE;

ALTER TABLE PERSONA_JURIDICA
    ADD CONSTRAINT CK_PJ_PRECIO_NOCHE
	CHECK (PRECIO_NOCHE>0)
ENABLE;

ALTER TABLE PERSONA_JURIDICA
    ADD CONSTRAINT CK_PJ_TIPO
	CHECK (TIPO='Hotel' OR TIPO= 'Hostal' OR TIPO='Vivienda')
ENABLE;

--CREAR TABLA HORARIO
CREATE TABLE HORARIO(
    ID_HOSTAL NUMBER,
    DIA VARCHAR2(1),
    HORA_ABRE DATE,
    HORA_CIERRE DATE
);

ALTER TABLE HORARIO
	ADD CONSTRAINT PK_HORARIO
	PRIMARY KEY (ID_HOSTAL,DIA)
ENABLE;

ALTER TABLE HORARIO
ADD CONSTRAINT FK_HORARIO_ID
    FOREIGN KEY (ID_HOSTAL)
    REFERENCES OPERADOR(ID)
ENABLE;

ALTER TABLE HORARIO
	MODIFY DIA NOT NULL
ENABLE;

ALTER TABLE HORARIO
	MODIFY HORA_ABRE NOT NULL
ENABLE;
ALTER TABLE HORARIO
	MODIFY HORA_CIERRE NOT NULL
ENABLE;

-- CREACION TABLA INMUEBLE
CREATE TABLE INMUEBLE(
    ID NUMBER,
    DIRECCION VARCHAR2(40),
    TIPO VARCHAR2(12),
    CAPACIDAD NUMBER,
    DISPONIBLE VARCHAR2(1),
    FECHA_RESERVA_FINAL DATE
);

ALTER TABLE INMUEBLE
	ADD CONSTRAINT PK_INMUEBLE
	PRIMARY KEY (ID)
ENABLE;

ALTER TABLE INMUEBLE
	MODIFY DIRECCION NOT NULL
ENABLE;

ALTER TABLE INMUEBLE
	MODIFY TIPO NOT NULL
ENABLE;

ALTER TABLE INMUEBLE
	MODIFY CAPACIDAD NOT NULL
ENABLE;

ALTER TABLE INMUEBLE
	MODIFY DISPONIBLE NOT NULL
ENABLE;

ALTER TABLE INMUEBLE
    ADD CONSTRAINT CK_INMUEBLE_TIPO
	CHECK (TIPO='Vivienda' OR TIPO= 'Habitacion' OR TIPO='Apartamento' OR TIPO='Habitacion Hotel'
    OR TIPO='Habitacion Hostal' OR TIPO='Habitacion Vivienda')
ENABLE;

-- CREAR TABLA HABITACION HOTEL

CREATE TABLE HABITACION_HOTEL(
    ID NUMBER,
    ID_HOTEL NUMBER,
    NUMERO NUMBER,
    TIPO VARCHAR2(9),
    PRECIO_NOCHE NUMBER,
    TAMANHO NUMBER,
    UBICACION VARCHAR2(40)
);

ALTER TABLE HABITACION_HOTEL
	ADD CONSTRAINT PK_HABITACION_HOTEL
	PRIMARY KEY (ID)
ENABLE;

ALTER TABLE HABITACION_HOTEL
ADD CONSTRAINT FK_HAB_HOTEL_ID
    FOREIGN KEY (ID)
    REFERENCES INMUEBLE(ID)
ENABLE;

ALTER TABLE HABITACION_HOTEL
ADD CONSTRAINT FK_HAB_HOTEL_ID_HOTEL
    FOREIGN KEY (ID_HOTEL)
    REFERENCES PERSONA_JURIDICA(ID)
ENABLE;

ALTER TABLE HABITACION_HOTEL
	MODIFY ID_HOTEL NOT NULL
ENABLE;

ALTER TABLE HABITACION_HOTEL
	MODIFY NUMERO NOT NULL
ENABLE;

ALTER TABLE HABITACION_HOTEL
	MODIFY TIPO NOT NULL
ENABLE;

ALTER TABLE HABITACION_HOTEL
	MODIFY PRECIO_NOCHE NOT NULL
ENABLE;

ALTER TABLE HABITACION_HOTEL
	MODIFY TAMANHO NOT NULL
ENABLE;

ALTER TABLE HABITACION_HOTEL
	MODIFY UBICACION NOT NULL
ENABLE;

ALTER TABLE HABITACION_HOTEL
    ADD CONSTRAINT CK_HAB_HOTEL_TIPO
	CHECK (TIPO='Estandar' OR TIPO= 'Semisuite' OR TIPO='Suite' )
ENABLE;

ALTER TABLE HABITACION_HOTEL
    ADD CONSTRAINT CK_HAB_HOTEL_PRECIO
	CHECK (PRECIO_NOCHE>=0 )
ENABLE;

ALTER TABLE HABITACION_HOTEL
    ADD CONSTRAINT CK_HAB_HOTEL_TAMANHO
	CHECK (TAMANHO>0 )
ENABLE;

-- CREACION TABLA HABITACION VIVIENDA
CREATE TABLE HABITACION_VIVIENDA(
    ID NUMBER,
    ID_VIVIENDA NUMBER,
    NUMERO NUMBER,
    PRECIO_SEMESTRE NUMBER,
    PRECIO_MES NUMBER,
    PRECIO_NOCHE NUMBER,
    UBICACION VARCHAR2(40),
    INDIVIDUAL VARCHAR2(1)
);

ALTER TABLE HABITACION_VIVIENDA
	ADD CONSTRAINT PK_HABITACION_VIVIENDA
	PRIMARY KEY (ID)
ENABLE;

ALTER TABLE HABITACION_VIVIENDA
ADD CONSTRAINT FK_HAB_VIV_ID
    FOREIGN KEY (ID)
    REFERENCES INMUEBLE(ID)
ENABLE;

ALTER TABLE HABITACION_VIVIENDA
ADD CONSTRAINT FK_HAB_VIV_ID_VIV
    FOREIGN KEY (ID_VIVIENDA)
    REFERENCES PERSONA_JURIDICA(ID)
ENABLE;

ALTER TABLE HABITACION_VIVIENDA
	MODIFY ID_VIVIENDA NOT NULL
ENABLE;

ALTER TABLE HABITACION_VIVIENDA
	MODIFY NUMERO NOT NULL
ENABLE;

ALTER TABLE HABITACION_VIVIENDA
	MODIFY PRECIO_SEMESTRE NOT NULL
ENABLE;

ALTER TABLE HABITACION_VIVIENDA
	MODIFY PRECIO_MES NOT NULL
ENABLE;

ALTER TABLE HABITACION_VIVIENDA
	MODIFY PRECIO_NOCHE NOT NULL
ENABLE;

ALTER TABLE HABITACION_VIVIENDA
	MODIFY INDIVIDUAL NOT NULL
ENABLE;

ALTER TABLE HABITACION_VIVIENDA
	MODIFY UBICACION NOT NULL
ENABLE;

ALTER TABLE HABITACION_VIVIENDA
    ADD CONSTRAINT CK_HAB_VIV_NUMERO
	CHECK (NUMERO>0)
ENABLE;

ALTER TABLE HABITACION_VIVIENDA
    ADD CONSTRAINT CK_HAB_VIV_PRECIO_SEM
	CHECK (PRECIO_SEMESTRE>=0 )
ENABLE;

ALTER TABLE HABITACION_VIVIENDA
    ADD CONSTRAINT CK_HAB_VIV_PRECIO_MES
	CHECK (PRECIO_MES>=0 )
ENABLE;

ALTER TABLE HABITACION_VIVIENDA
    ADD CONSTRAINT CK_HAB_VIV_PRECIO_NOCHE
	CHECK (PRECIO_NOCHE>=0 )
ENABLE;

ALTER TABLE HABITACION_VIVIENDA
    ADD CONSTRAINT CK_HAB_VIV_INDIVIDUAL
	CHECK (INDIVIDUAL='Y' OR INDIVIDUAL='N')
ENABLE;


-- CREACION TABLA HABITACION HOSTAL
CREATE TABLE HABITACION_HOSTAL(
    ID NUMBER,
    ID_HOSTAL NUMBER,
    NUMERO NUMBER
);

ALTER TABLE HABITACION_HOSTAL
	ADD CONSTRAINT PK_HABITACION_HOSTAL
	PRIMARY KEY (ID)
ENABLE;

ALTER TABLE HABITACION_HOSTAL
ADD CONSTRAINT FK_HAB_HOS_ID
    FOREIGN KEY (ID)
    REFERENCES INMUEBLE(ID)
ENABLE;

ALTER TABLE HABITACION_HOSTAL
ADD CONSTRAINT FK_HAB_HOS_ID_HOS
    FOREIGN KEY (ID_HOSTAL)
    REFERENCES PERSONA_JURIDICA(ID)
ENABLE;

ALTER TABLE HABITACION_HOSTAL
	MODIFY ID_HOSTAL NOT NULL
ENABLE;

ALTER TABLE HABITACION_HOSTAL
	MODIFY NUMERO NOT NULL
ENABLE;

-- CREACION DE TABLA SERVICIO MENAJE
CREATE TABLE SERVICIO_MENAJE(
    NOMBRE VARCHAR2(40),
    TIPO VARCHAR2(8)
);

ALTER TABLE SERVICIO_MENAJE
	ADD CONSTRAINT PK_SERVICIO_MENAJE
	PRIMARY KEY (NOMBRE)
ENABLE;

ALTER TABLE SERVICIO_MENAJE
    ADD CONSTRAINT CK_SM_TIPO
	CHECK (TIPO='Menaje' OR TIPO='Servicio')
ENABLE;

ALTER TABLE SERVICIO_MENAJE
	MODIFY TIPO NOT NULL
ENABLE;


-- CREACION TABLA OFRECE SERVICIO
CREATE TABLE OFRECE_SERVICIO(
    ID_SERVICIO_MENAJE VARCHAR2(40),
    ID_INMUEBLE NUMBER,
    COSTO NUMBER,
    CANTIDAD NUMBER
);

